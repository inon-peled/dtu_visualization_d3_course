<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>HW1</title>
    <link rel="stylesheet" href="hw1.css">
    <script type="text/javascript" src="d3.js"></script>
    <link rel="shortcut icon" type="image/png" href="favicon.ico"/>
</head>

<body>
<h1 class="homeworkTitle">Homework 1, Social Data Analysis and Visualization, DTU 2018</h1>

<hr/>

<div id="part1">
    <h2 class="partTitle">Part 1: DAOST Chapter 2 Questions</h2>
    <ol>
        <li><p class="question">Explain in your own words the point of the jitter plot.</p>
            <p class="answer">The point of the jitter box is to visually distinguish between overlapping points in one
                dimensional
                data, while keeping points close to their original locations.</p>
        </li>
        <li><p class="question">
            Explain in your own words the point of figure 2-3.
            (I'm going to skip saying "in your own words" going forward, but I hope you get the point;
            I expect all answers to be in your own words)
        </p>
            <p class="answer">
                The point of figure 2-3 is to show a disadvantage of histograms, namely their sensitivity to placement
                of bin edges, such that the same data appears very differently distributed for different choices of
                anchor points. This also means that there is generally no one-to-one correspondence between histogram
                and data.
            </p>
        </li>
        <li>
            <p class="question">
                The author of DAOST (Philipp Janert) likes KDEs (and think they're better than histograms).
                And I don't. I didn't give a detailed explanation in the video, but now that works to my advantage.
                I'll ask you guys to think about this and thereby create an excellent exercise:
                When can KDEs be misleading? </p>
            <p class="answer">
                KDE can be misleading when e.g. visualizing few samples from a uniform distribution. If the samples
                are spaced widely, the resulting KDE will look like a sequence of hills, whereas the actual distribution
                is a horizontal interval. Conversely, a histogram with few bins will faithfully represent the
                distribution.
            </p>
        </li>
        <li><p class="question">
            I've discussed some strengths of the CDF - there are also weaknesses.
            Janert writes "[CDFs] have less intuitive appeal than histograms or KDEs". What does he mean by that?
        </p>
            <p class="answer">
                Because a CDF is cumulative, it does not immediately convey the shape of the density function, but
                rather allows to quickly answer questions about totals. In contrast, histograms and KDE suggest the
                form of the underlying density function.
            </p>
        </li>
        <li>
            <p class="question">What is a Quantile plot? What is it good for?</p>
            <p class="answer">A quantile plot is a graph of the CDF with the x and y axes interchanged. Thus a quantile
                plot
                conveys the same information as CDF, but allows more easily to derive any quantile, i.e. the smallest
                datum
                which is greater than X% of the data.</p>
        </li>
        <li><p class="question">How is a Probablity Plot defined? What is it useful for? Have you ever seen one
            before?</p>
            <p class="answer">A probability plot is a method for showing how similar a data set is to another
                distribution &Phi;, which has mean &mu; and standard deviation &sigma;.
                It is a plot of the data set values  x<sub>i</sub> as a function of
                &Phi;<sup>−1</sup>(y<sub>i</sub>), where y<sub>i</sub> is the quantile of x<sub>i</sub>.
                &Phi; then corresponds to a straight line with slope &sigma; and zero-intercept &mu;,
                while dissimilarities with the
                data set are seen as deviations from the line.
                I have seen probability plots before, yay.
            </p>
        </li>
        <li><p class="question"> One of the reasons I like DAOST is that Janert is so suspicious of mean, median,
            and related summary statistics. Explain why one has to be careful when using those -
            and why visualization of the full data is always better.</p>
            <p class="answer">Data sets with very different underlying distributions may have the same summary
                statistics, hence
                summary statistics do not provide sufficient information about distributions. An acute example of this is
                <a href="https://en.wikipedia.org/wiki/Anscombe%27s_quartet">Anscombe's Quartet</a>.
                Therefore, to convey the main properties of a distribution, visualization of the
                full data must accompany the summary statistics.
            </p>
        </li>
        <li><p class="question">I love box plots. When are box plots most useful?</p>
            <p class="answer">Box plots compactly present summary statistics, main quantiles, and outliers. The boxes
                and outliers
                are drawn in proprtion to the width of the distribution at hand, hence box plots are useful for
                comparing
                the main structural properties of several data sets: widths, location, and frequency of outliers.</p>
        </li>
        <li><p class="question">The book doesn't mention
            <a href="https://en.wikipedia.org/wiki/Violin_plot">violin plots</a>.
            Are those better or worse than box plots? Why?</p>
            <p class="answer">Compared to box plots, violin plots add more information, such as shape of data density.
                Neither
                method is better or worse, rather each may be more appropriate depending on what properties we wish
                to visually convey. If we wish to convey quantile structure and outliers, box plots are more suitable,
                whereas if we wish to convey overall density shape, violin plots are more suitable. </p>
        </li>
    </ol>
</div>

<hr/>

<div id="part2">
    <h2 class="partTitle">Part 2: DAOST Chapter 3 Questions</h2>
    <ol>
        <li>
            <p class="question">Looking at Fig 3-1, Janert writes "the data itself shows clearly that the amount of
                random noise in the data is small". What do you think his argument is?
            </p>
            <p class="answer">Janert's argument is that the points are arranged over a clear, smooth curve,
                such that the points nearly do not deviate from the curve. As such, any inaccuracy in the measurements
                is systematic and consistent, and does not originate from an upredictable distribution.
            </p>
        </li>
        <li>
            <p class="question">
                Can you think of a real-world example of a multivariate relationship like the one in Fig 3-3 (lower
                right panel)?
            </p>
            <p class="answer">
                For example, the points may describe the two possible trajectories of a vehicle on some road, which
                starts as a straight line and then reaches a junction, where the vehicle may turn in either of two ways.
            </p>
        </li>
        <li>
            <p class="question">
                What are the two methods Janert metions for smoothing noisy data? Can you think of other ones?
            </p>
            <p class="answer">
                The two methods Janert mentions for smoothing noisy data are splines and LOESS. Whereas splines address
                overall smoothness and allow easy interpolation for unknown values, LOESS is focused on accuracy of
                local approximations and must be recalculated for new data values. Some other examples of smoothing
                techniques are <a href="https://en.wikipedia.org/wiki/Polynomial_regression">polynomial regression</a>
                and <a href="https://en.wikipedia.org/wiki/Autoregressive_integrated_moving_average">ARIMA</a>.
            </p>
        </li>
        <li>
            <p class="question">
                What are residuals? Why is it a good idea to plot the residuals of your fit?
            </p>
            <p class="answer">
                Residuals are the remainder when subtracting a smooth trend from data.
                It is a good idea to plot the residuals of the fit trend, because this allows to check that no
                systematic trends
                remain in the residuals. Such trends in the residuals indicate that the fit model is inappropriate
                for the data, as an appropriate model captures all significant patterns in the data.
            </p>
        </li>
        <li>
            <p class="question">
                Explain in your own words the point of the smooth tube in figure 3-7.
            </p>
            <p class="answer">
                The smooth tube in figure 3-7 is meant to convey confidence in the fit smooth curve.
                The narrower regions of the tube correspond to better approximation of the data. In addition, the more
                stable the width of the band is along the curve, the better the smooth fit captures trends in the data.
            </p>
        </li>
        <li>
            <p class="question">
                What kind of relationships will a semi-log plot help you discover?
            </p>
            <p class="answer">
                A semi-log plot help discover exponential relationships, namely y = C exp(&alpha; x), where C and &alpha;
                are constants. In a semi-log plot, such a relationship follows a straight line, because log(y)
                depends
                linearly on x as log(y) = &alpha; x + log(C).
            </p>
        </li>
        <li>
            <p class="question">
                What kind of functions will loglog plots help you see?
            </p>
            <p class="answer">
                A log-log plot helps discover power-law relationships, namely y = C x<sup>k</sup>, where C and k
                are constants. In a log-log plot, such a relationship follows a straight line, because log(y) depends
                linearly on log(x) as log(y) = k &middot; log(x) + log(C).
            </p>
        </li>
        <li>
            <p class="question">
                What the h#ll is banking and what element from our visual system does it use to help us see patterns?
                What are potential problems with banking?
            </p>
            <p class="answer">
                Banking to 45 degrees is reshaping the aspect ratio of a plot so that most slopes are close to a 45
                degree angle. This helps us perceive trends in the plotted data, because the human visual
                system easily captures changes in 45 degree angles, much more so than horizontal or vertical changes.
                However, bnanking may yield a problematic aspect ratio: 1) it may lose too much visual
                information, 2) it may make it hard to compare parts of the plot, 3) it may be visually unappealing,
                if it is too different than the commonly preferred 4:3 ratio.
            </p>
        </li>
        <li>
            <p class="question">
                I think figure 3-14 makes an important point about linear fits that is rarely made. What is it?
            </p>
            <p class="answer">
                The often overlooked point which is demonstrated in figure 3-14 is that for a two-dimensional dataset,
                the linear realtionship between the variables can significantly change based on which of the two
                we choose to be the independent variable. Consequently, it is important to correctly choose
                which variable is the dependent and which is the independent.
            </p>
        </li>
        <li>
            <p class="question">
                Summarize the discussion of Graphical Analysis and Presentation Graphics on pp. 68-69 in your own words.
            </p>
            <p class="answer">
                Plotting scientific data takes two stages: first analysis, then presentation. In the analysis phase,
                multiple graphics are plotted quickly, to study the data in search of patterns and new information.
                Once such information is found, research questions can be formulated and answered, and then the findings
                can be summarized for presentation to a target audience. Presentation plots are made to visually convey
                the study results, and are thus few, concise, and made with attention to detail.
            </p>
        </li>
    </ol>
</div>

<hr/>

<div id="part3">
    <h2 class="partTitle">Part 3: Viz 1</h2>
    <p class="disclaimer">FOR ACADEMIC PURPOSES ONLY ; THIS IS A REPRODUCTION OF
        <a href="http://iquantny.tumblr.com/post/129373499164/this-is-quantifiably-the-best-month-to-go-to-the">
            A BLOG POST
        </a>.</p>
    <h2 class="part3Title">This is Quantifiably the Best Month to go to the Farmers Market</h2>
    <p class="part3Date">SEPTEMBER 18, 2015</p>
    <div>
        <p class="pPart3Text">
            As part of a homework assignment, I ask my students at Pratt to go out and chart something of interest to
            them,
            and Katherine Savarese came back with a simple chart about farmers markets that I loved --
            it inspired this post.
        </p>
        <p class="pPart3Text">
            You probably know that farmers markets are a staple across all five boroughs of New York City,
            but September happens to be a very special month. Why is that?
            Well, it turns out September is the month with the most unique types of fresh produce --
            forty three to be exact.
        </p>
        <p class="pPart3Text">
            To show the current offerings, we charted how many types of fruits and vegetables are available by month,
            and showed if they were fresh or from storage. Use the selection box to display each category.
        </p>
    </div>
    <div id="interactive1">
        <div class="selectors">
            <select id="whatToDisplay" class="selectBox interactive">
                <option value=0>Fruits, Harvest</option>
                <option value=1>Fruits, Storage</option>
                <option value=2>Vegetables, Harvest</option>
                <option value=3>Vegetables, Storage</option>
            </select>
        </div>
        <script type="text/javascript">
            var axisPadding = 60;
            var svgWidth = 800;
            var svgHeight = 500;

            var dataset = [
                [0, 0, 0, 0, 0, 1, 7, 8, 10, 5, 0, 0],
                [2, 2, 1, 1, 1, 1, 0, 0, 0, 0, 2, 2],
                [0, 0, 0, 2, 11, 16, 23, 28, 33, 31, 11, 3],
                [9, 9, 6, 3, 3, 3, 2, 1, 0, 0, 6, 8]
            ];

            var barColors = [
                'red',
                'pink',
                'blue',
                'lightblue'
            ];

            var xLabels = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];

            var xScale = d3
                .scaleBand()
                .domain(d3.range(xLabels.length))
                .rangeRound([axisPadding, svgWidth])
                .paddingInner(0.05);
            var yScale = d3.scaleLinear();
            var yScaleRev = d3.scaleLinear();

            var svg = d3
                .select("#interactive1")
                .append("svg")
                .attr("class", "interactive")
                .attr("width", svgWidth)
                .attr("height", svgHeight);

            var xAxis = d3
                .axisBottom(xScale)
                .tickFormat(function (d, i) {
                    return xLabels[i];
                });
            var yAxis = d3
                .axisLeft(yScaleRev)
                .tickFormat(function (e) {
                    return Math.floor(e) !== e ? "" : e;
                });

            var refreshPlot = function (dataset, idx) {
                yScale
                    .domain([1 + d3.max(dataset[idx]), 0]);
                yScaleRev
                    .domain([1 + d3.max(dataset[idx]), 0]);
                svg
                    .selectAll(".bar")
                    .data(dataset[idx])
                    .transition()
                    .attr("y", function (d) {
                        return svgHeight - yScale(d);
                    })
                    .attr("height", function (d) {
                        return yScale(d) - axisPadding;
                    })
                    .attr("fill", barColors[idx]);
                svg
                    .selectAll(".barLabel")
                    .data(dataset[idx])
                    .transition()
                    .attr("y", function (d) {
                        return yScaleRev(d) - 10;
                    })
                    .text(function (d) {
                        return d;
                    });
                svg.select(".yAxis")
                    .transition()
                    .call(yAxis);
            };

            var initializePlot = function (dataset, idx) {
                yScale
                    .range([svgHeight - axisPadding, axisPadding]);
                yScaleRev
                    .range([axisPadding, svgHeight - axisPadding]);
                svg
                    .selectAll("rect")
                    .data(dataset[idx])
                    .enter()
                    .append("rect")
                    .attr("class", "bar")
                    .attr("x", function (d, i) {
                        return xScale(i);
                    })
                    .attr("width", xScale.bandwidth());
                svg.selectAll("text")
                    .data(dataset[idx])
                    .enter()
                    .append("text")
                    .attr("class", "barLabel")
                    .attr("x", function (d, i) {
                        return xScale(i) + xScale.bandwidth() / 2;
                    })
                    .attr("text-anchor", "middle")
                    .attr("font-family", "sans-serif")
                    .attr("font-size", 16  + "px");
                svg.append("g")
                    .attr("class", "xAxis")
                    .attr("transform", "translate(0, " + (svgHeight - axisPadding) + ")")
                    .call(xAxis);
                svg.append("g")
                    .attr("class", "yAxis")
                    .attr("transform", "translate(" + axisPadding + ", 0)")
                    .call(yAxis);

                svg.append("text")
                    .attr("x", svgWidth / 2)
                    .attr("y", axisPadding / 2)
                    .attr("text-anchor", "middle")
                    .style("font-size", "22px")
                    .text("NYC Green Markets: Unique Produce Types");
                svg.append("text")
                    .attr("transform", "rotate(-90)")
                    .attr("y", 0)
                    .attr("x", -svgHeight / 2)
                    .attr("dy", "1em")
                    .style("text-anchor", "middle")
                    .text("No. Unique Types of Produce");
                svg.append("text")
                    .attr("y", svgHeight - axisPadding / 2)
                    .attr("x", svgWidth / 2)
                    .attr("dy", "1em")
                    .style("text-anchor", "middle")
                    .text("Month");

                refreshPlot(dataset, idx);
            };

            initializePlot(dataset, 0);

            d3
                .select("#whatToDisplay")
                .on("change", function () {
                    refreshPlot(dataset, d3.select("#whatToDisplay").property("value"));
                });
        </script>
    </div>
    <div>
        <p class="pPart3Text">
            If you miss the month of September, you might be behind the fruit curve,
            but there are plenty more months of vegetables left.
            The chart shows that fresh vegetables are available 9 out of 12 months, but fruit is only available 5 out of
            12.
            Now if only we could quantify how delicious the produce is...
        </p>
    </div>
</div>

<hr/>

<div id="part4">
    <h2 class="partTitle">Part 4: Viz 2</h2>
    <p>The next plot shows the winning times for the annual Boston Marathon, rounded to nearest minute.
        The data displays the same trends as in DAOST figure 3-5: winning times for men generally follow
        a steady linear trends, whereas winning times for women drop sharply in the first years of women
        participation, then stabilize.
    </p>
    <p>
        We also present linear regression fits for each category of participants, and use the fits to
        predict the winning times in 2018. Because the data points for the women do not follow a global linear trend,
        the 2018 prediction for women is probably way off. Data and calculations are available in
        <a href="https://docs.google.com/spreadsheets/d/1MNXyRa3925kxtWQJzPkH6J8g2UYOMUXLtK7Ucfydw2I/edit?usp=sharing">
            this Google sheets document</a>.
    </p>
    <p>
        You can hover on any data point for more information about the corresponding winner,
        and use the selection box to change the displayed categories.
    </p>

    <div class="selectors">
        <select id="showForMarathon" class="selectBox interactive">
            <option value="allData">All Data</option>
            <option value="menOnly">Only Men</option>
            <option value="womenOnly">Only Women</option>
        </select>
    </div>

    <script type="text/javascript">
        var marathonData = "year\tathlete\tcountry\ttimePretty\tnotes\ttimeMinutes\tcategory\n" +
            "1897\tJohn J. McDermott\tUnited States (NY)\t2:55:10\t\t175\tmen\n" +
            "1898\tRonald J. MacDonald\tCanada\t2:42:00\t\t162\tmen\n" +
            "1899\tLawrence Brignolia\tUnited States (MA)\t2:54:38\t\t175\tmen\n" +
            "1900\tJohn \"Jack\" Caffery\tCanada\t2:39:44\t\t160\tmen\n" +
            "1901\tJohn \"Jack\" Caffery\tCanada\t2:29:23\t2nd victory\t149\tmen\n" +
            "1902\tSammy Mellor\tUnited States (NY)\t2:43:12\t\t163\tmen\n" +
            "1903\tJohn Lorden\tUnited States (MA)\t2:41:29\t\t161\tmen\n" +
            "1904\tMichael Spring\tUnited States (NY)\t2:38:04\t\t158\tmen\n" +
            "1905\tFrederick Lorz\tUnited States (NY)\t2:38:25\t\t158\tmen\n" +
            "1906\tTim Ford\tUnited States (MA)\t2:45:45\t\t166\tmen\n" +
            "1907\tThomas Longboat\tCanada\t2:24:24\t\t144\tmen\n" +
            "1908\tThomas Morrissey\tUnited States (NY)\t2:25:43\t\t146\tmen\n" +
            "1909\tHenri Renaud\tUnited States (NH)\t2:53:36\t\t174\tmen\n" +
            "1910\tFred Cameron\tCanada\t2:28:52\t\t149\tmen\n" +
            "1911\tClarence DeMar\tUnited States (MA)\t2:21:39\t\t142\tmen\n" +
            "1912\tMichael J. Ryan\tUnited States (NY)\t2:21:18\t\t141\tmen\n" +
            "1913\tFritz Carlson\tUnited States (MN)\t2:25:14\t\t145\tmen\n" +
            "1914\tJames Duffy\tCanada\t2:25:14\t\t145\tmen\n" +
            "1915\tÉdouard Fabre\tCanada\t2:31:41\t\t152\tmen\n" +
            "1916\tArthur Roth\tUnited States (MA)\t2:27:16\t\t147\tmen\n" +
            "1917\tBill Kennedy\tUnited States (NY)\t2:28:37\t\t149\tmen\n" +
            "1918\tCamp Devens relay team\tUnited States (MA)\t2:29:53\t1918 race was relay for 10-man military teams\t150\tmen\n" +
            "1919\tCarl Linder\tUnited States (MA)\t2:29:13\t\t149\tmen\n" +
            "1920\tPeter Trivoulides\tGreece\t2:29:31\tRepresented Greece at Olympic Games later that year\t150\tmen\n" +
            "1921\tFrank Zuna\tUnited States (NY)\t2:18:57\t\t139\tmen\n" +
            "1922\tClarence DeMar\tUnited States (MA)\t2:18:10\t2nd victory\t138\tmen\n" +
            "1923\tClarence DeMar\tUnited States (MA)\t2:23:47\t3rd victory\t144\tmen\n" +
            "1924\tClarence DeMar\tUnited States (MA)\t2:29:40\t4th victory\t150\tmen\n" +
            "1925\tCharles Mellor\tUnited States (IL)\t2:33:00\t\t153\tmen\n" +
            "1926\tJohnny Miles\tCanada\t2:25:40\t\t146\tmen\n" +
            "1927\tClarence DeMar\tUnited States (MA)\t2:40:22\t5th victory\t160\tmen\n" +
            "1928\tClarence DeMar\tUnited States (MA)\t2:37:07\t6th victory\t157\tmen\n" +
            "1929\tJohnny Miles\tCanada\t2:33:08\t2nd victory\t153\tmen\n" +
            "1930\tClarence DeMar\tUnited States (MA)\t2:34:48\t7th victory\t155\tmen\n" +
            "1931\tJames Henigan\tUnited States (MA)\t2:46:45\t\t167\tmen\n" +
            "1932\tPaul de Bruyn\tGermany\t2:33:36\t\t154\tmen\n" +
            "1933\tLeslie S. Pawson\tUnited States (RI)\t2:31:01\t\t151\tmen\n" +
            "1934\tDave Komonen\tCanada\t2:32:53\t\t153\tmen\n" +
            "1935\tJohn A. Kelley\tUnited States (MA)\t2:32:07\t\t152\tmen\n" +
            "1936\tEllison Brown\tUnited States (RI)\t2:33:40\t\t154\tmen\n" +
            "1937\tWalter Young\tCanada\t2:33:20\t\t153\tmen\n" +
            "1938\tLeslie S. Pawson\tUnited States (RI)\t2:35:34\t2nd victory\t156\tmen\n" +
            "1939\tEllison Brown\tUnited States (RI)\t2:28:51\t2nd victory\t149\tmen\n" +
            "1940\tGérard Côté\tCanada\t2:28:28\t\t148\tmen\n" +
            "1941\tLeslie S. Pawson\tUnited States (RI)\t2:30:38\t3rd victory\t151\tmen\n" +
            "1942\tJoe Smith\tUnited States (MA)\t2:26:51\t\t147\tmen\n" +
            "1943\tGérard Côté\tCanada\t2:28:25\t2nd victory\t148\tmen\n" +
            "1944\tGérard Côté\tCanada\t2:31:50\t3rd victory\t152\tmen\n" +
            "1945\tJohn A. Kelley\tUnited States (MA)\t2:30:40\t2nd victory\t151\tmen\n" +
            "1946\tStylianos Kyriakides\tGreece\t2:29:27\t\t149\tmen\n" +
            "1947\tSuh Yun-bok\tSouth Korea\t2:25:39\t\t146\tmen\n" +
            "1948\tGérard Côté\tCanada\t2:31:02\t4th victory\t151\tmen\n" +
            "1949\tGösta Leandersson\tSweden\t2:31:50\t\t152\tmen\n" +
            "1950\tHam Kee-Yong\tSouth Korea\t2:32:39\t\t153\tmen\n" +
            "1951\tShigeki Tanaka\tJapan\t2:27:45\t\t148\tmen\n" +
            "1952\tDoroteo Flores\tGuatemala\t2:31:53\tOnly Guatemalan to ever win the marathon\t152\tmen\n" +
            "1953\tKeizo Yamada\tJapan\t2:18:51\t\t139\tmen\n" +
            "1954\tVeikko Karvonen\tFinland\t2:20:39\t\t141\tmen\n" +
            "1955\tHideo Hamamura\tJapan\t2:18:22\t\t138\tmen\n" +
            "1956\tAntti Viskari\tFinland\t2:14:14\t\t134\tmen\n" +
            "1957\tJohn J. Kelley\tUnited States (CT)\t2:20:05\t\t140\tmen\n" +
            "1958\tFranjo Mihalić\tYugoslavia\t2:25:54\t\t146\tmen\n" +
            "1959\tEino Oksanen\tFinland\t2:22:42\t\t143\tmen\n" +
            "1960\tPaavo Kotila\tFinland\t2:20:54\t\t141\tmen\n" +
            "1961\tEino Oksanen\tFinland\t2:23:39\t2nd victory\t144\tmen\n" +
            "1962\tEino Oksanen\tFinland\t2:23:48\t3rd victory\t144\tmen\n" +
            "1963\tAurèle Vandendriessche\tBelgium\t2:18:58\t\t139\tmen\n" +
            "1964\tAurèle Vandendriessche\tBelgium\t2:19:59\t2nd victory\t140\tmen\n" +
            "1965\tMorio Shigematsu\tJapan\t2:16:33\t\t137\tmen\n" +
            "1966\tKenji Kimihara\tJapan\t2:17:11\t\t137\tmen\n" +
            "1967\tDave McKenzie\tNew Zealand\t2:15:45\t\t136\tmen\n" +
            "1968\tAmby Burfoot\tUnited States (CT)\t2:22:17\t\t142\tmen\n" +
            "1969\tYoshiaki Unetani\tJapan\t2:13:49\t\t134\tmen\n" +
            "1970\tRon Hill\tUnited Kingdom\t2:10:30\t\t131\tmen\n" +
            "1971\tÁlvaro Mejía\tColombia\t2:18:45\t\t139\tmen\n" +
            "1972\tOlavi Suomalainen\tFinland\t2:15:39\t\t136\tmen\n" +
            "1973\tJon Anderson\tUnited States (OR)\t2:16:03\t\t136\tmen\n" +
            "1974\tNeil Cusack\tIreland\t2:13:39\t\t134\tmen\n" +
            "1975\tBill Rodgers\tUnited States (MA)\t2:09:55\t\t130\tmen\n" +
            "1976\tJack Fultz\tUnited States (VA)\t2:20:19\t\t140\tmen\n" +
            "1977\tJerome Drayton\tCanada\t2:14:46\t\t135\tmen\n" +
            "1978\tBill Rodgers\tUnited States (MA)\t2:10:13\t2nd victory\t130\tmen\n" +
            "1979\tBill Rodgers\tUnited States (MA)\t2:09:27\t3rd victory\t129\tmen\n" +
            "1980\tBill Rodgers\tUnited States (MA)\t2:12:11\t4th victory\t132\tmen\n" +
            "1981\tToshihiko Seko\tJapan\t2:09:26\t\t129\tmen\n" +
            "1982\tAlberto Salazar\tUnited States (MA)\t2:08:52\t\t129\tmen\n" +
            "1983\tGreg Meyer\tUnited States (MI)\t2:09:00\t\t129\tmen\n" +
            "1984\tGeoff Smith\tUnited Kingdom\t2:10:34\t\t131\tmen\n" +
            "1985\tGeoff Smith\tUnited Kingdom\t2:14:05\t2nd victory\t134\tmen\n" +
            "1986\tRobert de Castella\tAustralia\t2:07:51\t\t128\tmen\n" +
            "1987\tToshihiko Seko\tJapan\t2:11:50\t2nd victory\t132\tmen\n" +
            "1988\tIbrahim Hussein\tKenya\t2:08:43\t\t129\tmen\n" +
            "1989\tAbebe Mekonnen\tEthiopia\t2:09:06\t\t129\tmen\n" +
            "1990\tGelindo Bordin\tItaly\t2:08:19\t\t128\tmen\n" +
            "1991\tIbrahim Hussein\tKenya\t2:11:06\t2nd victory\t131\tmen\n" +
            "1992\tIbrahim Hussein\tKenya\t2:08:14\t3rd victory\t128\tmen\n" +
            "1993\tCosmas Ndeti\tKenya\t2:09:33\t\t130\tmen\n" +
            "1994\tCosmas Ndeti\tKenya\t2:07:15\t2nd victory,\t127\tmen\n" +
            "1995\tCosmas Ndeti\tKenya\t2:09:22\t3rd victory\t129\tmen\n" +
            "1996\tMoses Tanui\tKenya\t2:09:15\t\t129\tmen\n" +
            "1997\tLameck Aguta\tKenya\t2:10:34\t\t131\tmen\n" +
            "1998\tMoses Tanui\tKenya\t2:07:34\t2nd victory\t128\tmen\n" +
            "1999\tJoseph Chebet\tKenya\t2:09:52\t\t130\tmen\n" +
            "2000\tElijah Lagat\tKenya\t2:09:47\t\t130\tmen\n" +
            "2001\tLee Bong-Ju\tSouth Korea\t2:09:43\t\t130\tmen\n" +
            "2002\tRodgers Rop\tKenya\t2:09:02\t\t129\tmen\n" +
            "2003\tRobert Kipkoech Cheruiyot\tKenya\t2:10:11\t\t130\tmen\n" +
            "2004\tTimothy Cherigat\tKenya\t2:10:37\t\t131\tmen\n" +
            "2005\tHailu Negussie\tEthiopia\t2:11:44\t\t132\tmen\n" +
            "2006\tRobert Kipkoech Cheruiyot\tKenya\t2:07:14\t2nd victory\t127\tmen\n" +
            "2007\tRobert Kipkoech Cheruiyot\tKenya\t2:14:13\t3rd victory\t134\tmen\n" +
            "2008\tRobert Kipkoech Cheruiyot\tKenya\t2:07:45\t4th victory\t128\tmen\n" +
            "2009\tDeriba Merga\tEthiopia\t2:08:42\t\t129\tmen\n" +
            "2010\tRobert Kiprono Cheruiyot\tKenya\t2:05:52\t\t126\tmen\n" +
            "2011\tGeoffrey Mutai\tKenya\t2:03:02\tCurrent men's course record\t123\tmen\n" +
            "2012\tWesley Korir\tKenya\t2:12:40\t\t133\tmen\n" +
            "2013\tLelisa Desisa Benti\tEthiopia\t2:10:22\t\t130\tmen\n" +
            "2014\tMeb Keflezighi\tUnited States (CA)\t2:08:37\tFirst American win since 1983\t129\tmen\n" +
            "2015\tLelisa Desisa Benti\tEthiopia\t2:09:17\t2nd victory\t129\tmen\n" +
            "2016\tLemi Berhanu Hayle\tEthiopia\t2:12:45\t\t133\tmen\n" +
            "2017\tGeoffrey Kirui\tKenya\t2:09:37\t\t130\tmen\n" +
            "1966\tBobbi Gibb\tUnited States (MA)\t3:21:40\t(unsanctioned)\t202\twomen\n" +
            "1967\tBobbi Gibb\tUnited States (CA)\t3:27:17\t(unsanctioned) 2nd victory\t207\twomen\n" +
            "1968\tBobbi Gibb\tUnited States (CA)\t3:30:00\t(unsanctioned) 3rd victory\t210\twomen\n" +
            "1969\tSara Mae Berman\tUnited States (MA)\t3:22:46\t(unsanctioned)\t203\twomen\n" +
            "1970\tSara Mae Berman\tUnited States (MA)\t3:05:07\t(unsanctioned) 2nd victory\t185\twomen\n" +
            "1971\tSara Mae Berman\tUnited States (MA)\t3:08:30\t(unsanctioned) 3rd victory\t189\twomen\n" +
            "1972\tNina Kuscsik\tUnited States (NY)\t3:10:26\tfirst year that women were officially sanctioned\t190\twomen\n" +
            "1973\tJacqueline Hansen\tUnited States (CA)\t3:05:59\t\t186\twomen\n" +
            "1974\tMiki Gorman\tUnited States (CA)\t2:47:11\t\t167\twomen\n" +
            "1975\tLiane Winter\tWest Germany\t2:42:24\t\t162\twomen\n" +
            "1976\tKim Merritt\tUnited States (WI)\t2:47:10\t\t167\twomen\n" +
            "1977\tMiki Gorman\tUnited States (CA)\t2:48:33\t2nd victory\t169\twomen\n" +
            "1978\tGayle Barron\tUnited States (GA)\t2:44:52\t\t165\twomen\n" +
            "1979\tJoan Benoit\tUnited States (ME)\t2:35:15\t\t155\twomen\n" +
            "1980\tJacqueline Gareau\tCanada\t2:34:28\t\t154\twomen\n" +
            "1981\tAllison Roe\tNew Zealand\t2:26:46\t\t147\twomen\n" +
            "1982\tCharlotte Teske\tWest Germany\t2:29:33\t\t150\twomen\n" +
            "1983\tJoan Benoit\tUnited States (ME)\t2:22:43\t2nd victory\t143\twomen\n" +
            "1984\tLorraine Moller\tNew Zealand\t2:29:28\t\t149\twomen\n" +
            "1985\tLisa Larsen Weidenbach\tUnited States (MI)\t2:34:06\t\t154\twomen\n" +
            "1986\tIngrid Kristiansen\tNorway\t2:24:55\t\t145\twomen\n" +
            "1987\tRosa Mota\tPortugal\t2:25:21\t\t145\twomen\n" +
            "1988\tRosa Mota\tPortugal\t2:24:30\t2nd victory\t145\twomen\n" +
            "1989\tIngrid Kristiansen\tNorway\t2:24:33\t2nd victory\t145\twomen\n" +
            "1990\tRosa Mota\tPortugal\t2:25:24\t3rd victory\t145\twomen\n" +
            "1991\tWanda Panfil\tPoland\t2:24:18\t\t144\twomen\n" +
            "1992\tOlga Markova\tRussia\t2:23:43\t\t144\twomen\n" +
            "1993\tOlga Markova\tRussia\t2:25:27\t2nd victory\t145\twomen\n" +
            "1994\tUta Pippig\tGermany\t2:21:45\t\t142\twomen\n" +
            "1995\tUta Pippig\tGermany\t2:25:11\t2nd victory\t145\twomen\n" +
            "1996\tUta Pippig\tGermany\t2:27:12\t3rd victory\t147\twomen\n" +
            "1997\tFatuma Roba\tEthiopia\t2:26:23\t\t146\twomen\n" +
            "1998\tFatuma Roba\tEthiopia\t2:23:21\t2nd victory\t143\twomen\n" +
            "1999\tFatuma Roba\tEthiopia\t2:23:25\t3rd victory\t143\twomen\n" +
            "2000\tCatherine Ndereba\tKenya\t2:26:11\t\t146\twomen\n" +
            "2001\tCatherine Ndereba\tKenya\t2:23:53\t2nd victory\t144\twomen\n" +
            "2002\tMargaret Okayo\tKenya\t2:20:43\t\t141\twomen\n" +
            "2003\tSvetlana Zakharova\tRussia\t2:25:19\t\t145\twomen\n" +
            "2004\tCatherine Ndereba\tKenya\t2:24:27\t3rd victory\t144\twomen\n" +
            "2005\tCatherine Ndereba\tKenya\t2:25:12\t4th victory\t145\twomen\n" +
            "2006\tRita Jeptoo\tKenya\t2:23:38\t\t144\twomen\n" +
            "2007\tLidiya Grigoryeva\tRussia\t2:29:18\t\t149\twomen\n" +
            "2008\tDire Tune\tEthiopia\t2:25:25\t2 seconds ahead of 2nd-place finisher\t145\twomen\n" +
            "2009\tSalina Kosgei\tKenya\t2:32:16\t1 second ahead of 2nd-place finisher\t152\twomen\n" +
            "2010\tTeyba Erkesso\tEthiopia\t2:26:11\t3 seconds ahead of 2nd-place finisher\t146\twomen\n" +
            "2011\tCaroline Kilel\tKenya\t2:22:36\t2 seconds ahead of 2nd-place finisher\t143\twomen\n" +
            "2012\tSharon Cherop\tKenya\t2:31:50\t2 seconds ahead of 2nd-place finisher\t152\twomen\n" +
            "2013\tRita Jeptoo\tKenya\t2:26:25\t2nd victory\t146\twomen\n" +
            "2014\tRita Jeptoo\tKenya\t2:18:57\tCourse record, later disqualified\t139\twomen\n" +
            "2014\tBizunesh Deba\tEthiopia\t2:19:59\t\t140\twomen\n" +
            "2015\tCaroline Rotich\tKenya\t2:24:55\t\t145\twomen\n" +
            "2016\tAtsede Baysa\tEthiopia\t2:29:19\t\t149\twomen\n" +
            "2017\tEdna Kiplagat\tKenya\t2:21:52\t\t142\twomen\n" +
            "2018\tTBD\tTBD\tPrediction: 2:11:07\t\t131\twomen\n" +
            "2018\tTBD\tTBD\tPrediction: 2:04:15\t\t124\tmen";

        var smallSquareDim = 8;
        var smallCircleRadius = 5;
        var padding2 = 60;
        var svgWidth2 = 1200;
        var svgHeight2 = 600;
        var womenLinearFit = {x1: 1966, x2: 2018, y1: 179.62, y2: 131.12};
        var menLinearFit = {x1: 1897, x2: 2018, y1: 159.36, y2: 124.25};

        var menData = [];
        var womenData = [];

        var div = d3
            .select("body")
            .append("div")
            .attr("class", "tooltip")
            .style("opacity", 0);

        var svg2 = d3.select("body")
            .append("svg")
            .attr("class", "interactive")
            .attr("width", svgWidth2)
            .attr("height", svgHeight2)
            .append("g")
            .attr("transform", "translate(0, 0)");

        var disappearAllLines = function () {
            d3.select("#menPath").attr("stroke", "none");
            d3.select("#womenPath").attr("stroke", "none");
            d3.select("#menLinearFit").attr("stroke", "none");
            d3.select("#womenLinearFit").attr("stroke", "none");
        };

        var drawLinesThroughPoints = function (xScale, yScale, pathId, dataset, strokeColor, linearFitId, linearFitData) {
            var line = d3.line()
                .x(function (d) {
                    return xScale(d.year);
                })
                .y(function (d) {
                    return yScale(d.timeMinutes);
                });
            d3
                .select(pathId)
                .datum(dataset)
                .attr("class", "line")
                .attr("d", line)
                .attr("stroke", strokeColor);
            d3
                .select(linearFitId)
                .attr("x1", xScale(linearFitData.x1))
                .attr("y1", yScale(linearFitData.y1))
                .attr("x2", xScale(linearFitData.x2))
                .attr("y2", yScale(linearFitData.y2))
                .attr("stroke", strokeColor)
        };

        var addCommonAttributes = function (selection) {
            return selection
                .style("fill", function (d) {
                    return d.year > 2017 ? "lightgreen" : "white";
                })
                .style("stroke", "black")
                .style("stroke-width", function (d) {
                    return d.year > 2017 ? "2" : "1";
                })
        };

        var showWomen = function (xScale, yScale, selection) {
            var sel = addCommonAttributes(
                selection
                    .transition()
                    .attr("cx", function (d) {
                        return xScale(d.year);
                    })
                    .attr("cy", function (d) {
                        return yScale(d.timeMinutes);
                    })
                    .attr("r", smallCircleRadius)
            );
            sel.on("start", disappearAllLines);
            sel.on("end", function () {
                drawLinesThroughPoints(
                    xScale, yScale, "#womenPath", womenData, "blue", "#womenLinearFit", womenLinearFit)
            });
            return sel;
        };

        var showMen = function (xScale, yScale, selection) {
            var sel = addCommonAttributes(
                selection
                    .transition()
                    .attr("x", function (d) {
                        return xScale(d.year) - smallSquareDim / 2;
                    })
                    .attr("y", function (d) {
                        return yScale(d.timeMinutes) - smallSquareDim / 2;
                    })
                    .attr("width", smallSquareDim)
                    .attr("height", smallSquareDim)
                    .attr("transform", function (d) {
                        return "rotate(-45, " +
                            (xScale(d.year)) + ", " +
                            (yScale(d.timeMinutes)) + ")";
                    })
            );
            sel.on("start", disappearAllLines);
            sel.on("end", function () {
                drawLinesThroughPoints(xScale, yScale, "#menPath", menData, "red", "#menLinearFit", menLinearFit);
            });
            return sel;
        };

        var readAllData = function () {
            var dataset = d3.tsvParse(
                marathonData,
                function (d) {
                    return {
                        year: parseInt(d.year),
                        athlete: d.athlete,
                        country: d.country,
                        timePretty: d.timePretty,
                        notes: d.notes,
                        timeMinutes: parseInt(d.timeMinutes),
                        category: d.category
                    };
                });
            menData = dataset.filter(function (d) {
                return d.category === "men"
            });
            womenData = dataset.filter(function (d) {
                return d.category === "women"
            });
            initializeSvg();
        };

        var disappearWomen = function (selection) {
            d3
                .select("#womenPath")
                .transition()
                .attr("stroke", "none");
            return selection
                .transition()
                .attr("r", 0)
                .transition();
        };

        var disappearMen = function (selection) {
            d3
                .select("#menPath")
                .transition()
                .attr("stroke", "none");
            return selection
                .transition()
                // .attr("x", svgWidth + 2 * padding)
                // .attr("y", svgHeight / 2)
                .attr("height", 0)
                .attr("width", 0)
                .transition();
        };

        var tooltipListeners = function (selection, xAttr, yAttr, color, cbInflate, cbDeflate) {
            selection
                .on("mouseover", function (d) {
                    div.transition()
                        .style("opacity", .9)
                        .style("background", color);
                    div
                        .html("<b>" + d.athlete + "</b><br/>" +
                            "<b>" + d.timePretty + "</b>, <i>" + d.country + "</i>, " + d.year +
                            "<br/>" + d.notes)
                        .style("left", (d3.event.pageX + 20) + "px")
                        .style("top", (d3.event.pageY - 20) + "px");
                    cbInflate(d3.select(this)
                        .transition()
                        .style("fill", color)
                        .style("stroke-width", "2")
                    );
                })
                .on("mouseout", function (d) {
                    div.transition()
                        .style("opacity", 0);
                    cbDeflate(d3.select(this)
                        .transition()
                        .style("fill", d.year > 2017 ? "lightgreen" : "white")
                        .style("stroke-width", d.year > 2017 ? "2" : "1")
                    );
                });
        };

        var placeLegend = function () {
            svg2.append("rect")
                .style("fill", "rgb(232,232,232)")
                .attr("id", "legendMarathon")
                .attr("x", svgWidth2 - 250)
                .attr("y", 50)
                .attr("stroke", "none")
                .attr("fill", "white")
                .attr("width", 170)
                .attr("height", 130);
            var legendX = parseFloat(d3.select("#legendMarathon").attr("x"));
            var legendY = parseFloat(d3.select("#legendMarathon").attr("y"));
            var legendSymbolsCenterX = legendX + 30 + smallSquareDim / 2;
            svg2
                .append("line")
                .attr("fill", "none")
                .attr("stroke", "red")
                .attr("stroke-width", "2")
                .attr("x1", legendSymbolsCenterX - 15)
                .attr("x2", legendSymbolsCenterX + 15)
                .attr("y1", legendY + 20 + smallSquareDim / 2)
                .attr("y2", legendY + 20 + smallSquareDim / 2);
            svg2.append("rect")
                .attr("fill", "white")
                .attr("stroke", "black")
                .attr("width", smallSquareDim)
                .attr("height", smallSquareDim)
                .attr("x", legendSymbolsCenterX - smallSquareDim / 2)
                .attr("y", legendY + 20)
                .attr("stroke", "black")
                .attr("fill", "white")
                .attr("transform", function (d) {
                    return "rotate(-45, " +
                        legendSymbolsCenterX + ", " +
                        (legendY + 20 + smallSquareDim / 2) + ")";
                });
            svg2.append("text")
                .text("Men")
                .attr("fill", "red")
                .attr("x", legendSymbolsCenterX + 20)
                .attr("y", legendY + 20 + smallSquareDim);
            svg2
                .append("line")
                .attr("fill", "none")
                .attr("stroke", "blue")
                .attr("stroke-width", "2")
                .attr("x1", legendSymbolsCenterX - 15)
                .attr("x2", legendSymbolsCenterX + 15)
                .attr("y1", legendY + 50)
                .attr("y2", legendY + 50);
            svg2.append("circle")
                .attr("fill", "white")
                .attr("stroke", "black")
                .attr("cx", legendSymbolsCenterX)
                .attr("cy", legendY + 50)
                .attr("r", smallCircleRadius)
                .attr("stroke", "black")
                .attr("fill", "white");
            svg2.append("text")
                .text("Women")
                .attr("fill", "blue")
                .attr("x", legendSymbolsCenterX + 20)
                .attr("y", legendY + 55);
            svg2
                .append("line")
                .attr("fill", "none")
                .attr("stroke", "black")
                .attr("stroke-width", "2")
                .attr("stroke-dasharray", "5, 5")
                .attr("x1", legendSymbolsCenterX - 15)
                .attr("x2", legendSymbolsCenterX + 15)
                .attr("y1", legendY + 75)
                .attr("y2", legendY + 75);
            svg2.append("text")
                .text("Linear Fit")
                .attr("fill", "black")
                .attr("x", legendSymbolsCenterX + 20)
                .attr("y", legendY + 80);
            svg2.append("circle")
                .attr("fill", "lightgreen")
                .attr("stroke", "black")
                .attr("stroke-width", "2")
                .attr("cx", legendSymbolsCenterX - 10)
                .attr("cy", legendY + 100)
                .attr("r", smallCircleRadius);
            svg2.append("rect")
                .attr("fill", "lightgreen")
                .attr("stroke", "black")
                .attr("stroke-width", "2")
                .attr("width", smallSquareDim)
                .attr("height", smallSquareDim)
                .attr("x", legendSymbolsCenterX + 2)
                .attr("y", legendY + 100 - smallCircleRadius)
                .attr("transform", function (d) {
                    return "rotate(-45, " +
                        (legendSymbolsCenterX + 2 + smallSquareDim / 2) + ", " +
                        (legendY + 100 - smallCircleRadius + smallSquareDim / 2) + ")"
                });
            svg2.append("text")
                .text("Prediction 2018")
                .attr("fill", "black")
                .attr("x", legendSymbolsCenterX + 20)
                .attr("y", legendY + 106);
        };

        var placeTitles = function () {
            svg2.append("text")
                .attr("transform", "rotate(-90)")
                .attr("y", 0)
                .attr("x", -svgHeight2 / 2)
                .attr("dy", "1em")
                .style("text-anchor", "middle")
                .text("Winning Time (Minutes)");
            svg2.append("text")
                .attr("x", svgWidth2 / 2)
                .attr("y", svgHeight2 - padding2 / 2)
                .attr("dy", "1em")
                .style("text-anchor", "middle")
                .text("Year");
            svg2.append("text")
                .attr("x", svgWidth2 / 2)
                .attr("y", padding2 / 2)
                .attr("text-anchor", "middle")
                .style("font-size", "30px")
                .text("Boston Marathon Winners");
        };

        var placeAxes = function () {
            svg2
                .append("g")
                .attr("class", "x axis");
            svg2
                .append("g")
                .attr("class", "y axis");
        };

        var placePaths = function () {
            svg2
                .append("path")
                .attr("id", "womenPath")
                .attr("fill", "none")
                .attr("stroke", "none");
            svg2
                .append("path")
                .attr("id", "menPath")
                .attr("fill", "none")
                .attr("stroke", "none");
            svg2
                .append("line")
                .attr("id", "womenLinearFit")
                .attr("fill", "none")
                .attr("stroke", "none")
                .attr("stroke-width", "2")
                .attr("stroke-dasharray", "5, 5");
            svg2
                .append("line")
                .attr("id", "menLinearFit")
                .attr("fill", "none")
                .attr("stroke", "none")
                .attr("stroke-width", "2")
                .attr("stroke-dasharray", "5, 5");
        };

        var initializeSymbols = function () {
            disappearWomen(svg2
                .selectAll("circle")
                .data(womenData)
                .enter()
                .append("circle")
                .attr("class", "womenSymbol")
            );
            disappearMen(svg2
                .selectAll("rect")
                .data(menData)
                .enter()
                .append("rect")
                .attr("class", "menSymbol")
            );
            tooltipListeners(
                svg2.selectAll(".womenSymbol"),
                "cx", "cy", "lightblue",
                function (sel) {
                    return sel
                        .style("r", 2 * smallCircleRadius);
                },
                function (sel) {
                    return sel
                        .style("r", smallCircleRadius);
                }
            );
            tooltipListeners(
                svg2.selectAll(".menSymbol"),
                "x", "y", "rgb(255, 179, 179)",
                function (sel) {
                    return sel
                        .style("width", 2 * smallSquareDim)
                        .style("height", 2 * smallSquareDim);
                },
                function (sel) {
                    return sel
                        .style("width", smallSquareDim)
                        .style("height", smallSquareDim);
                }
            );
        };

        var initializeSvg = function () {
            svg2
                .attr("width", svgWidth2)
                .attr("height", svgHeight2);
            placeTitles();
            placeAxes();
            placePaths();
            initializeSymbols();
            placeLegend();
            updatePlot("allData");
        };

        var updatePlot = function (optionToShow) {
            var datasetToShow = optionToShow === "allData" ? menData.concat(womenData) : (
                optionToShow === "menOnly" ? menData : womenData
            );
            var xScale = d3
                .scaleLinear()
                .domain([0.995 * d3.min(datasetToShow, function (d) {
                    return d.year;
                }), 1.002 * d3.max(datasetToShow, function (d) {
                    return d.year;
                })])
                .range([padding2, svgWidth2 - padding2]);
            var yScale = d3
                .scaleLinear()
                .domain([0.9 * d3.min(datasetToShow, function (d) {
                    return d.timeMinutes;
                }), 1.03 * d3.max(datasetToShow, function (d) {
                    return d.timeMinutes;
                })])
                .range([svgHeight2 - padding2, padding2]);

            var xAxis = d3
                .axisBottom(xScale)
                .ticks(10, "d");
            var yAxis = d3
                .axisLeft(yScale);

            if (optionToShow === "allData") {
                showMen(xScale, yScale, svg2.selectAll(".menSymbol"));
                showWomen(xScale, yScale, svg2.selectAll(".womenSymbol"));
            } else if (optionToShow === "menOnly") {
                disappearWomen(svg2.selectAll(".womenSymbol"));
                showMen(xScale, yScale, svg2.selectAll(".menSymbol"));
            } else if (optionToShow === "womenOnly") {
                disappearMen(svg2.selectAll(".menSymbol"));
                showWomen(xScale, yScale, svg2.selectAll(".womenSymbol"))
            }

            svg2.select(".x.axis")
                .attr("transform", "translate(0, " + (svgHeight2 - padding2) + ")")
                .transition()
                .call(xAxis);
            svg2.select(".y.axis")
                .attr("transform", "translate(" + padding2 + ", 0)")
                .transition()
                .call(yAxis);
        };

        readAllData();

        d3
            .select("#showForMarathon")
            .on("change", function () {
                updatePlot(d3.select("#showForMarathon").property("value"));
            });
    </script>
</div>

<hr/>

</body>

</html>
